def cross_val_predict_with_progress(model, X, y, cv_folds):
    skf = StratifiedKFold(n_splits=cv_folds, shuffle=True, random_state=42)
    y_pred = np.empty_like(y)
    with tqdm(total=cv_folds, desc="Cross-validation") as pbar:
        for train_idx, test_idx in skf.split(X, y):
            model_clone = clone(model)
            model_clone.fit(X[train_idx], y[train_idx])
            y_pred[test_idx] = model_clone.predict(X[test_idx])
            pbar.update(1)
    return y_pred